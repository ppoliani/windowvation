{"version":3,"sources":["webpack:///webpack/bootstrap 2e07d8b2d29199d1038b","webpack:///./public/app/core/app.js","webpack:///external \"angular\"","webpack:///./public/app/config/routes.js","webpack:///./public/app/config/routeCallbacks.js","webpack:///./public/app/core/controllers.js","webpack:///./public/app/core/services.js","webpack:///./public/app/core/constants.js","webpack:///./public/app/home/homeCtrl.js","webpack:///./public/app/services/httpService.js","webpack:///./public/app/services/mathOperationManager.js","webpack:///./public/app/services/responseParser.js","webpack:///./public/app/services/serviceClient.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,wC;;;;;;;ACtCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA,EAAC,I;;;;;;AClDD,0B;;;;;;ACAA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;ACvCA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;;AAEA,4B;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,G;;;;;;;ACRA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACLD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC;;;;;;;ACxBD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,I;;;;;;AC/CD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,I;;;;;;AC/CD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAmC;AACnC;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6CAA4C;;AAE5C;AACA,iDAAgD;AAChD;AACA;AACA,iDAAgD;AAChD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAoC;;AAEpC;AACA,iDAAgD;AAChD;AACA;AACA,iDAAgD;AAChD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA0C;;AAE1C;AACA,iDAAgD;AAChD;;AAEA;AACA;AACA;AACA,cAAa;AACb;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,I;;;;;;AC5HD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,yBAAwB;;AAExB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;;AAErB;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;;AAErB;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA;AACA,kBAAiB;;AAEjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;;AAErB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,I","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2e07d8b2d29199d1038b\n **/","(function(){\r\n    'use strict';\r\n\r\n    // region Deps\r\n\r\n    var\r\n        angular = require('angular'),\r\n        routes = require('../config/routes'),\r\n        routeCallbacks = require('../config/routeCallbacks'),\r\n        controllers = require('./controllers'),\r\n        services = require('./services'),\r\n        constants = require('./constants');\r\n    // endregion\r\n\r\n    // region Private Fields\r\n\r\n    var\r\n        _mainModule = angular.module('app.core', [\r\n            'ngRoute',\r\n            'app.services',\r\n            'app.controllers'\r\n        ]),\r\n\r\n        servicesModule = angular.module('app.services', []),\r\n        controllersModule = angular.module('app.controllers', []);\r\n\r\n    // endregion\r\n\r\n    // region Register all Controllers\r\n\r\n    controllers.forEach(function(controller){\r\n        controllersModule.controller(controller.name, controller.ctrl);\r\n    });\r\n\r\n    // endregion\r\n\r\n    // region Register All Services\r\n\r\n    services.concat(constants).forEach(function(service){\r\n        servicesModule[service.type](service.name, service.service);\r\n    });\r\n\r\n    // endregion\r\n\r\n    // region Config Phase\r\n\r\n    routes(_mainModule);\r\n    routeCallbacks(_mainModule);\r\n\r\n    // endregion\r\n})();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/core/app.js\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = angular;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"angular\"\n ** module id = 1\n ** module chunks = 0\n **/","// region Consts\r\n\r\n// This is relative to the nodeJS static files directory !!!\r\nvar BASE_DIR = '/public/app/';\r\n\r\n// endregion\r\n\r\n// region Inner Methods\r\n\r\n/**\r\n * Registers front end routes\r\n * @param app\r\n */\r\nfunction configure(app) {\r\n    app.config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {\r\n        $routeProvider\r\n            .when('/', {\r\n                templateUrl: _getPath('home/index'),\r\n                controller: 'homeCtrl as vm',\r\n                title: 'Rest Client'\r\n            });\r\n\r\n        $routeProvider.otherwise('/');\r\n        $locationProvider.html5Mode(true);\r\n    }]);\r\n}\r\n\r\n/**\r\n * Return the paths relative to base dir\r\n *\r\n * @param filePath\r\n * @returns {string}\r\n * @private\r\n */\r\nfunction _getPath(filePath){\r\n    return BASE_DIR + filePath + '.html';\r\n}\r\n\r\n// endregion\r\n\r\nmodule.exports = configure;\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/config/routes.js\n ** module id = 2\n ** module chunks = 0\n **/","\r\nfunction configure(app){\r\n    app.run(['$rootScope', function($rootScope){\r\n        $rootScope.$on('$routeChangeSuccess', function(event, route){\r\n            $rootScope.title = 'Windowvation | ' + route.title;\r\n        });\r\n    }]);\r\n}\r\n\r\nmodule.exports = configure;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/config/routeCallbacks.js\n ** module id = 3\n ** module chunks = 0\n **/","/**\r\n * Loads all the controllers of the app\r\n */\r\nmodule.exports = [\r\n    require('../home/homeCtrl')\r\n];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/core/controllers.js\n ** module id = 4\n ** module chunks = 0\n **/","/**\r\n * Loads all the services of the app\r\n */\r\nmodule.exports = [\r\n    require('../services/httpService'),\r\n    require('../services/mathOperationManager'),\r\n    require('../services/responseParser'),\r\n    require('../services/serviceClient')\r\n\r\n];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/core/services.js\n ** module id = 5\n ** module chunks = 0\n **/","\nmodule.exports = [{\n  name: 'API_ENDPOINT',\n  type: 'constant',\n  service: 'http://windowvationquizserver.elasticbeanstalk.com'\n}];\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/core/constants.js\n ** module id = 6\n ** module chunks = 0\n **/","/**\r\n * Home ctrl\r\n */\r\n(function(){\r\n    'use strict';\r\n\r\n    function HomeCtrl(serviceClient){\r\n        this.records = serviceClient.records\r\n\r\n        serviceClient.start();\r\n    }\r\n\r\n    // region CommonJS\r\n\r\n    module.exports = {\r\n        name: 'homeCtrl',\r\n        ctrl: [\r\n            'serviceClient',\r\n            HomeCtrl\r\n        ]\r\n    };\r\n    \r\n    // endregion\r\n\r\n})();\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/home/homeCtrl.js\n ** module id = 7\n ** module chunks = 0\n **/","/**\r\n * http service\r\n */\r\n(function(){\r\n    'use strict';\r\n\r\n    function httpService($http){\r\n\r\n        // region Inner Methods\r\n\r\n        function get(url){\r\n            return $http.get(url);\r\n        }\r\n\r\n        function post(url, data){\r\n            return $http({\r\n                method: 'POST',\r\n                url: url,\r\n                data: data\r\n            });\r\n        }\r\n\r\n        // endregion\r\n\r\n        // region Public API\r\n\r\n        return {\r\n            get: get,\r\n            post: post\r\n        };\r\n\r\n        // endregion\r\n    }\r\n\r\n    // region CommonJS\r\n\r\n    module.exports = {\r\n        name: 'httpService',\r\n        type: 'factory',\r\n        service: [\r\n            '$http',\r\n            httpService\r\n        ]\r\n    };\r\n\r\n    // endregion\r\n\r\n})();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/services/httpService.js\n ** module id = 8\n ** module chunks = 0\n **/","/**\r\n * Performs math operations\r\n */\r\n(function(){\r\n    'use strict';\r\n    \r\n    function mathOperationManager(){\r\n    \r\n        // region Inner Methods\r\n\r\n        /**\r\n         * Performs the math operation based on the passed array\r\n         * which follows a fixed pattern e.g. 5 plus 5\r\n         * @param operation\r\n         */\r\n        function getResult(operation){\r\n            switch(operation[1]){\r\n                case 'plus':\r\n                    return operation[0] + operation [2];\r\n                case 'minus':\r\n                    return operation[0] - operation [2];\r\n                case 'times':\r\n                    return operation[0] * operation [2];\r\n            }\r\n        }\r\n\r\n        // endregion\r\n        \r\n        // region Public API\r\n        \r\n        return {\r\n            getResult: getResult\r\n        };\r\n        \r\n        // endregion\r\n    }\r\n    \r\n    // region CommonJS\r\n    \r\n    module.exports = {\r\n        name: 'mathOperationManager',\r\n        type: 'factory',\r\n        service: [mathOperationManager]\r\n    };\r\n    \r\n    // endregion\r\n\r\n})();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/services/mathOperationManager.js\n ** module id = 9\n ** module chunks = 0\n **/","/**\r\n * Response parser\r\n */\r\n(function(){\r\n    'use strict';\r\n\r\n    function responseParser(){\r\n        // region Consts\r\n\r\n        var HTTP_METHOD_REGEX = /GET|POST/gm;\r\n        var URL_REGEX = /\\/\\S*$/gm; //find URL\r\n        var OPERATION_REGEX = /\\d+\\s(?:plus|minus|times)\\s\\d+\\?/gm;\r\n\r\n        // endregion\r\n\r\n        // region Inner Methods\r\n\r\n        /**\r\n         * Parses the response and return the HTTP method and the\r\n         * url of the next request\r\n         * @param response\r\n         */\r\n        function parseResponse(response){\r\n            return {\r\n                httpMethod: _findHttpMethod(response),\r\n                url: _findUrl(response)\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Parses the question response and return the HTTP method, the\r\n         * url of the next request and the operation to be answered\r\n         * @param response\r\n         */\r\n        function parseQuestionResponse(response){\r\n            return {\r\n                httpMethod: _findHttpMethod(response),\r\n                url: _findUrl(response),\r\n                operation: _getOperation(response)\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Finds the http method from the given string\r\n         * @param response\r\n         * @private\r\n         */\r\n        function _findHttpMethod(response){\r\n            var result = HTTP_METHOD_REGEX.exec(response);\r\n\r\n            HTTP_METHOD_REGEX.lastIndex = 0; // Reset\r\n\r\n            if(!result.length){\r\n                throw new Error('Wrong response; no method found');\r\n            }\r\n            else if(result.length > 1){\r\n                throw new Error('Wrong response; multiple http methods found');\r\n            }\r\n\r\n            return result[0];\r\n        }\r\n\r\n        /**\r\n         * Finds the url from the given response\r\n         * @param response\r\n         * @private\r\n         */\r\n        function _findUrl(response){\r\n            var result = URL_REGEX.exec(response);\r\n\r\n            URL_REGEX.lastIndex = 0; // Reset\r\n\r\n            if(!result.length){\r\n                throw new Error('Wrong response; no url found');\r\n            }\r\n            else if(result.length > 1){\r\n                throw new Error('Wrong response; multiple urls found');\r\n            }\r\n\r\n            return result[0];\r\n        }\r\n\r\n        /**\r\n         * Finds the operation part of the given response\r\n         * @param response\r\n         * @private\r\n         */\r\n        function _getOperation(response){\r\n            var result = OPERATION_REGEX.exec(response);\r\n\r\n            OPERATION_REGEX.lastIndex = 0; // Reset\r\n\r\n            if(!result.length){\r\n                throw new Error('Wrong response; no operation found');\r\n            }\r\n\r\n            return result[0].split(' ').map(function(token, index){\r\n                if(index === 1) return token;\r\n                return parseInt(token);\r\n            });\r\n        }\r\n\r\n        // endregion\r\n\r\n        // region Public API\r\n\r\n        return {\r\n            parseResponse: parseResponse,\r\n            parseQuestionResponse: parseQuestionResponse\r\n        };\r\n\r\n        // endregion\r\n    }\r\n\r\n    // region CommonJS\r\n\r\n    module.exports = {\r\n        name: 'responseParser',\r\n        type: 'factory',\r\n        service: [responseParser]\r\n    };\r\n\r\n    // endregion\r\n\r\n})();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/services/responseParser.js\n ** module id = 10\n ** module chunks = 0\n **/","/**\r\n * service client\r\n */\r\n(function(){\r\n    'use strict';\r\n    \r\n    function serviceClient(API_ENDPOINT, httpService, responseParser, mathOperationManager){\r\n\r\n        // region Inner Methods\r\n\r\n        function start(){\r\n            _sendNameDetails();\r\n        }\r\n\r\n        function _sendNameDetails(){\r\n            var url = API_ENDPOINT + '/begin',\r\n                data = { name: 'Pavlos' };\r\n\r\n            httpService.post(url, data)\r\n                .success(function(response, status){\r\n                    console.log('[' + status + '] ' + response);\r\n\r\n                    api.records.push({\r\n                        url: url,\r\n                        httpMethod: 'POST',\r\n                        httpRequest: data.name,\r\n                        httpResponse: response\r\n                    });\r\n\r\n                    _moveToQuestionStep(responseParser.parseResponse(response));\r\n                })\r\n                .error(function(response, status){\r\n                    console.error('[' + status + '] ' + response);\r\n                });\r\n        }\r\n\r\n        function _moveToQuestionStep(nextReqDetails){\r\n            var url = API_ENDPOINT + nextReqDetails.url;\r\n\r\n            httpService[nextReqDetails.httpMethod.toLowerCase()](url)\r\n                .success(function(response, status){\r\n                    console.log('[' + status + '] ' + response);\r\n\r\n                    api.records.push({\r\n                        url: url,\r\n                        httpMethod: nextReqDetails.httpMethod,\r\n                        httpRequest: 'No Data',\r\n                        httpResponse: response\r\n                    });\r\n\r\n                    _moveToAnswerStep(responseParser.parseQuestionResponse(response));\r\n                })\r\n                .error(function(response, status){\r\n                    console.error('[' + status + '] ' + response);\r\n                });\r\n        }\r\n\r\n        function _moveToAnswerStep(nextReqDetails){\r\n            var data = {\r\n                    answer: mathOperationManager.getResult(nextReqDetails.operation)\r\n                },\r\n\r\n                url = API_ENDPOINT + nextReqDetails.url;\r\n\r\n            httpService[nextReqDetails.httpMethod.toLowerCase()](url, data)\r\n                .success(function(response, status){\r\n                    console.log('[' + status + '] ' + response);\r\n\r\n                    api.records.push({\r\n                        url: url,\r\n                        httpMethod: nextReqDetails.httpMethod,\r\n                        httpRequest: data.answer,\r\n                        httpResponse: response\r\n                    });\r\n\r\n                    if(!_hasReachedTheEnd(response)){\r\n                        _moveToQuestionStep(responseParser.parseResponse(response));\r\n                    }\r\n                })\r\n                .error(function(response, status){\r\n                    console.error('[' + status + '] ' + response);\r\n                });\r\n        }\r\n\r\n        /**\r\n         * Checks if the given reponse is the last one\r\n         * @param response\r\n         * @returns {boolean}\r\n         * @private\r\n         */\r\n        function _hasReachedTheEnd(response){\r\n            return response.indexOf('Well done') !== -1;\r\n        }\r\n\r\n        // endregion\r\n        \r\n        // region Public API\r\n        \r\n        var api = {\r\n            start: start,\r\n            records: []\r\n        };\r\n\r\n        return api;\r\n\r\n        // endregion\r\n    }\r\n    \r\n    // region CommonJS\r\n    \r\n    module.exports = {\r\n        name: 'serviceClient',\r\n        type: 'factory',\r\n        service: [\r\n            'API_ENDPOINT',\r\n            'httpService',\r\n            'responseParser',\r\n            'mathOperationManager',\r\n            serviceClient\r\n        ]\r\n    };\r\n    \r\n    // endregion\r\n\r\n})();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app/services/serviceClient.js\n ** module id = 11\n ** module chunks = 0\n **/"],"sourceRoot":"","file":"app.js"}